\documentclass[a4paper,titlepage]{article}


\usepackage{a4wide} %smaller borders
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\parindent=0pt
\parskip=4pt plus 6pt minus 2pt
\usepackage[siunitx, RPvoltages]{circuitikz}
\usepackage{ctikzmanutils}


\def\Circuitikz{CircuiTi\emph{k}Z}

\author{Jesse op den Brouw\thanks{The Hague University of Applied Sciences (THUAS), \texttt{J.E.J.opdenBrouw@hhs.nl}}}
\title{\Circuitikz\ -- Triode}
\date{\today}


\input{triode-circuitikz.tex}

\begin{document}


This document describes the use of a standard triode tube in the schematic drawing extension \Circuitikz. It is highly configurable and has a large number of anchors.

\subsubsection*{Basic usage}

The triode must be placed as a node, for example:

\begin{LTXexample}[varwidth]
\begin{tikzpicture}
\draw (0,0) node[triode] (Tri) {};
\end{tikzpicture}
\end{LTXexample}

You can draw the filament if you like:

\begin{LTXexample}[varwidth]
\begin{tikzpicture}line width=1pt,font=\sffamily\footnotesize
\draw (0,0) node[triode,filament] (Tri) {};
\end{tikzpicture}
\end{LTXexample}

\subsubsection*{Triode anchors}

The triode has three basic anchors and a text (or label) anchor: anode, cathode grid and text. The can be accessed by \emph{nodename}.\texttt{anode}, \emph{nodename}.\texttt{cathode}, \emph{nodename}.\texttt{grid} and \emph{nodename}.\texttt{text}. The filament has no anchors. The position of the anchors is shown below.

\begin{LTXexample}[varwidth]
\begin{tikzpicture}
\draw (0,0) node[triode] (Tri) {}
\foreach \tria/\trip in {grid/left, anode/above,
                         cathode/below, text/right}
{
   (Tri.\tria) node[circ] {} node[\trip] {\tria}
}
;
\end{tikzpicture}
\end{LTXexample}

Below is a figure that shows all geographical anchors (scaled by 2, filled with pink, bounding box).

\begin{tikzpicture}[line width=1pt,font=\sffamily\footnotesize]
\draw (0,0) node[triode,scale=2,filament,fill=pink!50] (Tri) {}; % center
\draw[red] (Tri.north west) rectangle (Tri.south east);

\draw
\foreach \tria/\trip in {center/above,west/left,north/above,south/below,east/right,north west/left, north east/right, south west/left, south east/right} {
	(Tri.\tria) node[circ] {} node[\trip] {\tria}
}
;
\end{tikzpicture}

The following parameters can be altered:

\begin{lstlisting}[basicstyle=\small\ttfamily]
\ctikzset{tubes/triode/thickness/.initial=1}                % relative line thickness
\ctikzset{tubes/triode/tube width/.initial=0.40}            % radius of tube circle
\ctikzset{tubes/triode/anode distance/.initial=0.20}        % distance from grid
\ctikzset{tubes/triode/anode width/.initial=0.20}           % width of (half) an anode/plate
\ctikzset{tubes/triode/cathode distance/.initial=0.20}      % distance from grid
\ctikzset{tubes/triode/cathode width/.initial=0.20}         % width of (half) an cathode
\ctikzset{tubes/triode/cathode corners/.initial=0.06}       % corners of the cathode wire
\ctikzset{tubes/triode/cathode right extend/.initial=0.075} % extension at the right side
\ctikzset{tubes/triode/grid protrusion/.initial=0.10}       % distance in tube circle
\ctikzset{tubes/triode/grid dashes/.initial=5}              % number of grid dashes
\ctikzset{tubes/triode/filament distance/.initial=0.05}     % distance from cathode
\ctikzset{tubes/triode/filament angle/.initial=15}          % Angle from centerpoint
\end{lstlisting}


\bigskip

Sample network:

\ctikzset{bipoles/thickness=1}

\begin{tikzpicture}[line width=1]
\draw (0,0) 	to[sV=$V_i$] ++(0,2.75)
            	to[C=$C_i$] ++(2,0)
				node[triode,anchor=grid] (Tri) {} ++(2,0)
(Tri.cathode)	to[R=$R_c$,-*] ++(0,-2) node(Rcbot) {}
(Tri.anode)		to [R=$R_a$] ++(0,2)
				to [short] ++(3.5,0) node(Vatop) {}
				to [V<=$V_a$] (Rcbot -| Vatop)
				to [short] (0,0)
(Tri.anode) ++(0,0.2) to[C=$C_o$,*-o] ++(2,0)
(Tri.cathode) ++(0,-0.2) to[short,*-] ++(1.5,0) node(Cctop) {}
				to[C=$C_c$,-*] (Rcbot -| Cctop)
;

\draw[red,thin] (Tri.north west) rectangle (Tri.south east);
\draw[blue] (Tri.text) node[right] {$\frac{1}{2}$ECC83};
\end{tikzpicture}

\end{document}